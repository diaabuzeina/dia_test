<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø£Ù…Ù„</title>
<style>
body { font-family: 'Tahoma', sans-serif; margin:0; background:#f0f4f8; }
header { background:#0077b6; color:white; padding:20px; font-size:28px; text-align:center; }
main { padding:40px; text-align:center; }
.section { background:white; padding:30px; border-radius:12px; margin:20px auto; max-width:800px; box-shadow:0 4px 15px rgba(0,0,0,0.1);}
#botToggle { position:fixed; bottom:30px; right:30px; background:#0077b6; color:white; border:none; border-radius:50%; width:60px; height:60px; font-size:28px; cursor:pointer; z-index:1000; }
#botWindow { display:none; position:fixed; bottom:100px; right:30px; width:360px; height:480px; background:white; border-radius:16px; padding:15px; flex-direction:column; z-index:1000; box-shadow:0 8px 25px rgba(0,0,0,0.3); }
#messages { flex:1; overflow-y:auto; margin-bottom:10px; }
#botInput { display:flex; gap:5px; }
#botInput input { flex:1; padding:10px; border-radius:8px; border:1px solid #ccc; }
#botInput button { padding:10px 14px; border:none; border-radius:8px; background:#0077b6; color:white; cursor:pointer; }
</style>
</head>
<body>

<header>Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø£Ù…Ù„</header>
<main>
  <div class="section">
    <h2>Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒÙ… ÙÙŠ Ù…Ø³ØªØ´ÙÙ‰ Ø§Ù„Ø£Ù…Ù„</h2>
    <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¨ÙˆØª Ø£Ø³ÙÙ„ ÙŠÙ…ÙŠÙ† Ø§Ù„ØµÙØ­Ø© Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§.</p>
  </div>
</main>

<button id="botToggle">ğŸ’¬</button>

<div id="botWindow">
  <header><button id="closeBot">X</button></header>
  <div id="messages"></div>
  <div id="botInput">
    <input type="text" id="userInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." />
    <button id="sendBtn">Ø¥Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script>
const botToggle = document.getElementById("botToggle");
const botWindow = document.getElementById("botWindow");
const closeBot = document.getElementById("closeBot");
const messages = document.getElementById("messages");
const userInput = document.getElementById("userInput");
const sendBtn = document.getElementById("sendBtn");

// Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¨ÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
botToggle.onclick = () => { botWindow.style.display = "flex"; userInput.focus(); };

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨ÙˆØª
closeBot.onclick = () => botWindow.style.display = "none";

// Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
function sendMessage() {
  const text = userInput.value.trim();
  if(!text) return;
  messages.innerHTML += `<div class="msg user">${text}</div>`;
  userInput.value = "";
  messages.scrollTop = messages.scrollHeight;

  // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¨Ø§ÙŠØ«ÙˆÙ† Ø¹Ø¨Ø± fetch
  fetch("/bot", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ message: text })
  })
  .then(res => res.json())
  .then(data => {
    messages.innerHTML += `<div class="msg bot">${data.reply}</div>`;
    messages.scrollTop = messages.scrollHeight;
    userInput.focus();
  });
}

sendBtn.onclick = sendMessage;
userInput.addEventListener("keypress", e => { if(e.key==="Enter") sendMessage(); });
</script>

</body>
</html>
